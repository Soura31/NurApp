{% extends 'base.html' %}
{% load currency %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<section class="max-w-7xl mx-auto px-4 sm:px-6 py-10" data-aos="fade-up">
  <h1 class="font-cinzel text-4xl text-white mb-6">Dashboard</h1>
  <div class="grid md:grid-cols-2 xl:grid-cols-4 gap-4">
    <div class="nur-glass-card rounded-2xl p-5"><p class="text-[#8b949e]">Versets lus ce mois</p><p class="text-3xl font-black text-[#f0c060]">{{ stats.versets_lus }}</p></div>
    <div class="nur-glass-card rounded-2xl p-5"><p class="text-[#8b949e]">Prieres completees</p><p class="text-3xl font-black text-[#f0c060]">{{ stats.prieres_suivies }}</p></div>
    <div class="nur-glass-card rounded-2xl p-5"><p class="text-[#8b949e]">Dhikrs ce mois</p><p class="text-3xl font-black text-[#f0c060]">{{ stats.tasbih_total }}</p></div>
    <div class="nur-glass-card rounded-2xl p-5"><p class="text-[#8b949e]">Jours consecutifs</p><p class="text-3xl font-black text-[#f0c060]">{{ user.userprofile.streak_days|default:0 }}</p></div>
  </div>

  <div class="grid lg:grid-cols-[1.2fr,.8fr] gap-6 mt-6">
    <div class="bg-[#161b22] border border-[#c9a84c]/20 rounded-2xl p-5">
      <h2 class="font-cinzel text-2xl text-white mb-3">Activite 7 jours</h2>
      <canvas id="activityChart" height="120"></canvas>
    </div>
    <div class="space-y-4">
      <div class="bg-[#161b22] border border-[#c9a84c]/20 rounded-2xl p-5">
        <p class="text-[#f0c060] font-semibold">Reprendre la lecture</p>
        <p class="text-[#8b949e] mt-2">Continuez votre recitation la ou vous vous etiez arrete.</p>
        <a href="/quran/" class="inline-block mt-3 px-4 py-2 rounded-xl text-[#080c10] font-semibold" style="background:var(--nur-gold-gradient)">Continuer</a>
      </div>
      <div class="bg-[#161b22] border border-[#c9a84c]/20 rounded-2xl p-5">
        <p class="text-[#f0c060] font-semibold">Rappels du jour</p>
        <p class="text-[#8b949e] mt-2">Prochaine priere, azkar et hadith du jour.</p>
        <div class="mt-3 flex gap-2"><a href="/prayer-times/" class="px-3 py-2 rounded-xl border border-[#c9a84c]/30 text-[#c9a84c]">Prieres</a><a href="/hadith/" class="px-3 py-2 rounded-xl border border-[#c9a84c]/30 text-[#c9a84c]">Hadith</a></div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
const chart = document.getElementById('activityChart');
if(chart){
  const g = chart.getContext('2d').createLinearGradient(0,0,0,220);
  g.addColorStop(0,'rgba(201,168,76,.45)');
  g.addColorStop(1,'rgba(201,168,76,.03)');
  new Chart(chart,{type:'bar',data:{labels:['Lun','Mar','Mer','Jeu','Ven','Sam','Dim'],datasets:[{data:[4,6,8,5,9,7,10],backgroundColor:g,borderColor:'#c9a84c',borderWidth:1}]},options:{plugins:{legend:{display:false}},scales:{x:{ticks:{color:'#8b949e'}},y:{ticks:{color:'#8b949e'}}}}});
}
</script>
{% endblock %}
