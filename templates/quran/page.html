{% extends 'base.html' %}
{% block title %}الصفحة {{ page_number }}{% endblock %}
{% block extra_head %}
<style>
  #main-nav, footer { display: none !important; }
  main { padding-top: 0 !important; }
</style>
{% endblock %}
{% block content %}
<section class="min-h-screen bg-[#f7f7f7]">
  <div class="mx-auto max-w-md px-4 py-6">
    <div class="flex items-center justify-between text-[#5d8b79] text-sm mb-4" dir="rtl">
      <a href="{% if next_page %}/quran/pages/{{ next_page }}/{% else %}#{% endif %}?reciter={{ selected_reciter }}" class="{% if not next_page %}pointer-events-none opacity-40{% endif %}">التالي</a>
      <span>الصفحة {{ page_number }}</span>
      <a href="{% if prev_page %}/quran/pages/{{ prev_page }}/{% else %}#{% endif %}?reciter={{ selected_reciter }}" class="{% if not prev_page %}pointer-events-none opacity-40{% endif %}">السابق</a>
    </div>

    <div class="rounded-3xl bg-white border border-[#dfe7e2] px-4 py-6 shadow-[0_10px_24px_rgba(0,0,0,.08)]">
      <form method="get" class="mb-5 flex items-center justify-center gap-2">
        <select name="reciter" class="rounded-full border border-[#c8dad0] bg-[#eef6f0] px-3 py-2 text-xs text-[#215f4b]">{% for r in reciters %}<option value="{{ r.id }}" {% if r.id|stringformat:'s' == selected_reciter|stringformat:'s' %}selected{% endif %}>{{ r.reciter_name }}</option>{% endfor %}</select>
        <button class="rounded-full border border-[#c3daca] bg-[#dceddf] px-3 py-2 text-xs text-[#215f4b]">تطبيق</button>
      </form>

      {% for v in verses %}
        {% ifchanged v.chapter_id %}
        <div class="mx-auto mb-5 mt-2 w-fit rounded-full border border-[#c8ddd1] bg-[#eef6f0] px-5 py-1">
          <p class="font-amiri text-3xl text-[#1f6b54]" dir="rtl">{{ v.chapter_name_arabic }}</p>
        </div>
        {% endifchanged %}
        <p class="font-amiri text-[2rem] leading-[2.2] text-[#222] text-center" dir="rtl">{{ v.text_uthmani }} <span class="inline-flex h-8 min-w-8 items-center justify-center rounded-full border border-[#aacbb8] px-1 text-[0.95rem] text-[#2a7159]">{{ v.verse_number }}</span></p>
      {% empty %}
        <p class="text-center text-[#8b949e]">تعذر تحميل الصفحة حاليا</p>
      {% endfor %}
    </div>

    <div class="mt-5 rounded-2xl border border-[#d2e3d9] bg-[#edf6f1] p-3">
      <form action="/quran/pages/1/" method="get" onsubmit="this.action='/quran/pages/' + this.page_number.value + '/';" class="flex items-center justify-center gap-2">
        <button class="rounded-full border border-[#c3daca] bg-[#dceddf] px-3 py-2 text-xs text-[#215f4b]">اذهب</button>
        <input type="number" name="page_number" min="1" max="604" value="{{ page_number }}" class="w-24 rounded-full border border-[#c8ded1] bg-white px-3 py-2 text-center text-[#215f4b]">
        <label class="text-sm text-[#487b68]">الصفحة</label>
        <input type="hidden" name="reciter" value="{{ selected_reciter }}">
      </form>
    </div>
  </div>
</section>
{% endblock %}
