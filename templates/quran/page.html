{% extends 'base.html' %}
{% block title %}Page {{ page_number }} - Coran{% endblock %}
{% block content %}
<section class="max-w-7xl mx-auto px-4 sm:px-6 py-8" data-aos="fade-up">
  <div class="flex flex-wrap items-center justify-between gap-3">
    <h1 class="font-cinzel text-2xl sm:text-3xl text-white">Lecture Par Page</h1>
    <span class="px-4 py-2 rounded-full bg-[#161b22] border border-[#c9a84c]/30 text-[#c9a84c]">Page {{ page_number }} / 604</span>
  </div>

  <div class="sticky top-16 z-40 bg-[#0d1117]/95 backdrop-blur-xl border-b border-[#c9a84c]/10 mt-6 p-3 rounded-xl">
    <form method="get" class="flex flex-wrap items-center gap-3">
      <select name="reciter" class="w-full sm:w-auto rounded-lg bg-[#161b22] border border-[#c9a84c]/20 px-3 py-2 text-sm text-white">{% for r in reciters %}<option value="{{ r.id }}" {% if r.id|stringformat:'s' == selected_reciter|stringformat:'s' %}selected{% endif %}>{{ r.reciter_name }}</option>{% endfor %}</select>
      <button class="px-4 py-2 rounded-full text-[#080c10] font-bold" style="background:var(--nur-gold-gradient)">Appliquer</button>
    </form>
  </div>

  <div class="mt-6 space-y-4">
    {% for v in verses %}
    <article class="rounded-2xl p-6" style="background:rgba(201,168,76,.02);border:1px solid rgba(201,168,76,.08)">
      <div class="flex flex-wrap items-center justify-between gap-2 mb-3">
        <span class="h-9 w-9 rounded-lg bg-[#c9a84c]/20 text-[#f0c060] flex items-center justify-center">{{ v.verse_number }}</span>
        <audio controls preload="none" class="h-8 w-full sm:w-auto">{% if v.audio.url %}<source src="{{ v.audio.url }}">{% endif %}</audio>
      </div>
      <p class="font-amiri text-3xl sm:text-4xl leading-loose text-right text-white tracking-wide" dir="rtl" lang="ar">{{ v.text_uthmani }} ۝</p>
    </article>
    {% empty %}
    <p class="text-[#8b949e]">Impossible de charger la page pour le moment.</p>
    {% endfor %}
  </div>

  <div class="mt-8 flex items-center justify-between gap-3">
    {% if prev_page %}
    <a href="/quran/pages/{{ prev_page }}/?reciter={{ selected_reciter }}" class="px-5 py-2 rounded-full border border-[#c9a84c]/40 text-[#c9a84c]">← Page precedente</a>
    {% else %}
    <span></span>
    {% endif %}
    {% if next_page %}
    <a href="/quran/pages/{{ next_page }}/?reciter={{ selected_reciter }}" class="px-5 py-2 rounded-full border border-[#c9a84c]/40 text-[#c9a84c]">Page suivante →</a>
    {% endif %}
  </div>
</section>
{% endblock %}
